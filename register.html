<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Đăng ký tài khoản - Bán Vải Online</title>
    <link
        crossorigin="anonymous"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
        rel="stylesheet"
    />
    <style>
        body {
            font-family: "Arial", sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px 0;
        }
        .form-section {
            padding: 40px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 20px auto 60px;
        }
        .form-section h2 {
            margin-bottom: 20px;
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            text-align: center;
        }
        .btn-custom {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 12px 20px;
            width: 100%;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .btn-custom:hover {
            background-color: #0056b3;
        }
        .social-login {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
        .social-login button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
            cursor: pointer;
            font-size: 16px;
        }
        .btn-facebook {
            background-color: #3b5998;
        }
        .btn-facebook:hover {
            background-color: #334d84;
        }
        .btn-google {
            background-color: #db4437;
        }
        .btn-google:hover {
            background-color: #c23321;
        }
        .alert-message {
            text-align: center;
            display: none;
            margin-bottom: 15px;
        }
        .alert-success {
            color: #28a745;
        }
        .alert-danger {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-section">
            <h2>ĐĂNG KÝ TÀI KHOẢN</h2>
            <p class="text-center">Vui lòng nhập Email và Mật khẩu để đăng ký tài khoản</p>
            <div class="alert alert-success alert-message" id="successMessage">Đăng ký thành công!</div>
            <div class="alert alert-danger alert-message" id="submissionError">Đã xảy ra lỗi khi đăng ký. Vui lòng thử lại sau.</div>
            <form id="registrationForm" novalidate>
                <div class="mb-3">
                    <label for="email" class="form-label">Email *</label>
                    <input class="form-control" id="email" placeholder="Email *" required type="email" aria-describedby="emailHelp" />
                    <div class="invalid-feedback" id="emailError">Vui lòng nhập một địa chỉ email hợp lệ.</div>
                </div>
                <div class="mb-3">
                    <label for="confirmEmail" class="form-label">Xác nhận Email *</label>
                    <input class="form-control" id="confirmEmail" placeholder="Xác nhận Email *" required type="email" aria-describedby="confirmEmailHelp" />
                    <div class="invalid-feedback" id="confirmEmailError">Email xác nhận không khớp.</div>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Mật khẩu *</label>
                    <input class="form-control" id="password" placeholder="Mật khẩu *" required type="password" aria-describedby="passwordHelp" />
                    <div class="invalid-feedback" id="passwordError">Vui lòng nhập mật khẩu (ít nhất 6 ký tự).</div>
                </div>
                <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Xác nhận Mật khẩu *</label>
                    <input class="form-control" id="confirmPassword" placeholder="Xác nhận Mật khẩu *" required type="password" aria-describedby="confirmPasswordHelp" />
                    <div class="invalid-feedback" id="confirmPasswordError">Mật khẩu xác nhận không khớp.</div>
                </div>
                <div class="text-center">
                    <button class="btn-custom" type="submit">ĐĂNG KÝ</button>
                </div>
            </form>
            <div class="social-login">
                <button class="btn-facebook" id="facebookLogin">
                    <i class="fab fa-facebook-f me-2"></i> Facebook
                </button>
                <button class="btn-google" id="googleLogin">
                    <i class="fab fa-google me-2"></i> Google
                </button>
            </div>
        </div>
    </div>

    <!-- Font Awesome -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js"
      integrity="sha512-OL1e4xdQXY+MCAuXqudI+VwVkljheAPp34zqzM1Ee3x/NmFJRmVw3t3ZpVJ4t0k9uSnho/0Iae/BmL2uC7s3FQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const registrationForm = document.getElementById("registrationForm");
            const successMessage = document.getElementById("successMessage");
            const submissionError = document.getElementById("submissionError");

            registrationForm.addEventListener("submit", async (e) => {
                e.preventDefault(); // Ngăn chặn hành động mặc định của form

                // Reset các trạng thái trước đó
                resetValidation();

                if (validateForm()) {
                    // Thu thập dữ liệu form
                    const formData = {
                        email: document.getElementById("email").value.trim(),
                        password: document.getElementById("password").value.trim(),
                    };

                    try {
                        // Hiển thị loader hoặc disable nút submit nếu cần
                        const submitButton = registrationForm.querySelector('button[type="submit"]');
                        submitButton.disabled = true;
                        submitButton.textContent = "Đang xử lý...";

                        // Gọi API thực tế ở đây
                        // Ví dụ:
                        // const response = await fetch('/api/register', {
                        //     method: 'POST',
                        //     headers: { 'Content-Type': 'application/json' },
                        //     body: JSON.stringify(formData)
                        // });
                        // if (!response.ok) throw new Error('Network response was not ok');

                        // Giả lập API call thành công với setTimeout
                        await new Promise((resolve) => setTimeout(resolve, 2000));

                        // Hiển thị thông báo thành công
                        successMessage.style.display = "block";
                        registrationForm.reset();
                    } catch (error) {
                        console.error("Error during registration:", error);
                        submissionError.style.display = "block";
                    } finally {
                        // Kích hoạt lại nút submit
                        const submitButton = registrationForm.querySelector('button[type="submit"]');
                        submitButton.disabled = false;
                        submitButton.textContent = "ĐĂNG KÝ";
                    }
                } else {
                    submissionError.style.display = "none"; // Ẩn thông báo lỗi chung nếu có
                }
            });

            function validateForm() {
                let isValid = true;

                // Email
                const email = document.getElementById("email");
                const emailError = document.getElementById("emailError");
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(email.value.trim())) {
                    email.classList.add("is-invalid");
                    emailError.textContent = "Vui lòng nhập một địa chỉ email hợp lệ.";
                    isValid = false;
                } else {
                    email.classList.remove("is-invalid");
                    email.classList.add("is-valid");
                }

                // Xác nhận Email
                const confirmEmail = document.getElementById("confirmEmail");
                const confirmEmailError = document.getElementById("confirmEmailError");
                if (confirmEmail.value.trim() === "") {
                    confirmEmail.classList.add("is-invalid");
                    confirmEmailError.textContent = "Vui lòng xác nhận email của bạn.";
                    isValid = false;
                } else if (confirmEmail.value.trim() !== email.value.trim()) {
                    confirmEmail.classList.add("is-invalid");
                    confirmEmailError.textContent = "Email xác nhận không khớp.";
                    isValid = false;
                } else {
                    confirmEmail.classList.remove("is-invalid");
                    confirmEmail.classList.add("is-valid");
                }

                // Mật khẩu
                const password = document.getElementById("password");
                const passwordError = document.getElementById("passwordError");
                if (password.value.trim().length < 6) {
                    password.classList.add("is-invalid");
                    passwordError.textContent = "Vui lòng nhập mật khẩu (ít nhất 6 ký tự).";
                    isValid = false;
                } else {
                    password.classList.remove("is-invalid");
                    password.classList.add("is-valid");
                }

                // Xác nhận Mật khẩu
                const confirmPassword = document.getElementById("confirmPassword");
                const confirmPasswordError = document.getElementById("confirmPasswordError");
                if (confirmPassword.value.trim() === "") {
                    confirmPassword.classList.add("is-invalid");
                    confirmPasswordError.textContent = "Vui lòng xác nhận mật khẩu của bạn.";
                    isValid = false;
                } else if (confirmPassword.value.trim() !== password.value.trim()) {
                    confirmPassword.classList.add("is-invalid");
                    confirmPasswordError.textContent = "Mật khẩu xác nhận không khớp.";
                    isValid = false;
                } else {
                    confirmPassword.classList.remove("is-invalid");
                    confirmPassword.classList.add("is-valid");
                }

                return isValid;
            }

            function resetValidation() {
                const inputs = registrationForm.querySelectorAll(".form-control");
                inputs.forEach(input => {
                    input.classList.remove("is-invalid");
                    input.classList.remove("is-valid");
                });
                successMessage.style.display = "none";
                submissionError.style.display = "none";
            }

            // Sự kiện cho nút Facebook
            const facebookLogin = document.getElementById("facebookLogin");
            facebookLogin.addEventListener("click", () => {
                console.log("Đăng nhập bằng Facebook");
                alert("Đăng nhập qua Facebook thành công!");
            });

            // Sự kiện cho nút Google
            const googleLogin = document.getElementById("googleLogin");
            googleLogin.addEventListener("click", () => {
                console.log("Đăng nhập bằng Google");
                alert("Đăng nhập qua Google thành công!");
            });
        });
    </script>
</body>
</html>
